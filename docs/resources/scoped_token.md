---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "artifactory_scoped_token Resource - terraform-provider-artifactory"
subcategory: "Security"
---

# Artifactory Scoped Token Resource

Provides an Artifactory Scoped Token resource. This can be used to create and manage Artifactory Scoped Tokens.

!>Scoped Tokens will be stored in the raw state as plain-text. [Read more about sensitive data in
state](https://www.terraform.io/docs/state/sensitive-data.html).

~>Token would not be saved by Artifactory if `expires_in` is less than the persistency threshold value (default to 10800 seconds) set in Access configuration. See [Persistency Threshold](https://jfrog.com/help/r/jfrog-platform-administration-documentation/using-the-revocable-and-persistency-thresholds) for details.

## Example Usages

```terraform
### Create a new Artifactory scoped token for an existing user

resource "artifactory_scoped_token" "scoped_token" {
  username = "existing-user"
}

### **Note:** This assumes that the user `existing-user` has already been created in Artifactory by different means, i.e. manually or in a separate terraform apply.

### Create a new Artifactory user and scoped token
resource "artifactory_user" "new_user" {
  name   = "new_user"
  email  = "new_user@somewhere.com"
  groups = ["readers"]
}

resource "artifactory_scoped_token" "scoped_token_user" {
  username = artifactory_user.new_user.name
}

### Creates a new token for groups
resource "artifactory_scoped_token" "scoped_token_group" {
  scopes = ["applied-permissions/groups:readers"]
}

### Create token with expiry
resource "artifactory_scoped_token" "scoped_token_no_expiry" {
  username   = "existing-user"
  expires_in = 7200 // in seconds
}

### Creates a refreshable token
resource "artifactory_scoped_token" "scoped_token_refreshable" {
  username    = "existing-user"
  refreshable = true
}

### Creates an administrator token
resource "artifactory_scoped_token" "admin" {
  username = "admin-user"
  scopes   = ["applied-permissions/admin"]
}

### Creates a token with an audience
resource "artifactory_scoped_token" "audience" {
  username  = "admin-user"
  scopes    = ["applied-permissions/admin"]
  audiences = ["jfrt@*"]
}
```

## Argument reference

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `audiences` (Set of String) A list of the other instances or services that should accept this token identified by their Service-IDs. Limited to total 255 characters. Default to '*@*' if not set. Service ID must begin with valid JFrog service type. Options: jfrt, jfxr, jfpip, jfds, jfmc, jfac, jfevt, jfmd, jfcon, or *. For instructions to retrieve the Artifactory Service ID see this [documentation](https://jfrog.com/help/r/jfrog-rest-apis/get-service-id)
- `description` (String) Free text token description. Useful for filtering and managing tokens. Limited to 1024 characters.
- `expires_in` (Number) The amount of time, in seconds, it would take for the token to expire. An admin shall be able to set whether expiry is mandatory, what is the default expiry, and what is the maximum expiry allowed. Must be non-negative. Default value is based on configuration in 'access.config.yaml'. See [API documentation](https://jfrog.com/help/r/jfrog-rest-apis/create-token) for details. Access Token would not be saved by Artifactory if this is less than the persistence threshold value (default to 10800 seconds) set in Access configuration. See [official documentation](https://jfrog.com/help/r/jfrog-platform-administration-documentation/using-the-revocable-and-persistency-thresholds) for details.
- `grant_type` (String) The grant type used to authenticate the request. In this case, the only value supported is `client_credentials` which is also the default value if this parameter is not specified.
- `include_reference_token` (Boolean) Also create a reference token which can be used like an API key.
- `refreshable` (Boolean) Is this token refreshable? Default is `false`.
- `scopes` (Set of String) The scope of access that the token provides. Access to the REST API is always provided by default. Administrators can set any scope, while non-admin users can only set the scope to a subset of the groups to which they belong.
  The supported scopes include:
* `applied-permissions/user` - provides user access. If left at the default setting, the token will be created with the user-identity scope, which allows users to identify themselves in the Platform but does not grant any specific access permissions.* `applied-permissions/admin` - the scope assigned to admin users.* `applied-permissions/groups` - the group to which permissions are assigned by group name (use username to inicate the group name)* `system:metrics:r` - for getting the service metrics* `system:livelogs:r` - for getting the service livelogsrThe scope to assign to the token should be provided as a list of scope tokens, limited to 500 characters in total.
  Resource Permissions
  From Artifactory 7.38.x, resource permissions scoped tokens are also supported in the REST API. A permission can be represented as a scope token string in the following format:
  `<resource-type>:<target>[/<sub-resource>]:<actions>`
  Where:
  `<resource-type>` - one of the permission resource types, from a predefined closed list. Currently, the only resource type that is supported is the artifact resource type.
  `<target>` - the target resource, can be exact name or a pattern `<sub-resource>` - optional, the target sub-resource, can be exact name or a pattern `<actions>` - comma-separated list of action acronyms.The actions allowed are <r, w, d, a, m> or any combination of these actions
  .To allow all actions - use `*`
  Examples:  `["applied-permissions/user", "artifact:generic-local:r"]`
  `["applied-permissions/group", "artifact:generic-local/path:*"]`
  `["applied-permissions/admin", "system:metrics:r", "artifact:generic-local:*"]`
- `username` (String) The user name for which this token is created. The username is based on the authenticated user - either from the user of the authenticated token or based on the username (if basic auth was used). The username is then used to set the subject of the token: <service-id>/users/<username>. Limited to 255 characters.

### Read-Only

- `access_token` (String, Sensitive) Returns the access token to authenticate to Artifactory.
- `expiry` (Number) Returns the token expiry.
- `id` (String) The ID of this resource.
- `issued_at` (Number) Returns the token issued at date/time.
- `issuer` (String) Returns the token issuer.
- `reference_token` (String, Sensitive) Reference Token (alias to Access Token).
- `refresh_token` (String, Sensitive) Refresh token.
- `subject` (String) Returns the token type.
- `token_type` (String) Returns the token type.

**Notes:**
- Changing **any** field forces a new resource to be created.

## References

- https://jfrog.com/help/r/jfrog-platform-administration-documentation/access-tokens
- https://jfrog.com/help/r/jfrog-rest-apis/access-tokens

## Import

Artifactory **does not** retain scoped tokens, and they cannot be imported into state.

